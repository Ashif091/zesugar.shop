<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ZESUGAR PISTORS</title>
  <link rel="shortcut icon" type="image" href="./image/logo.png">
  <link rel="stylesheet" href="/styles.css">
  <!-- bootstrap links -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <!-- bootstrap links -->

  <!-- animation links -->
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <!-- animation links -->

  <style>
    .error-message {
      color: red;
      font-size: 12px;
    }
    input{
      margin: 5px 0 5px 0 ;
      
    }
    input::placeholder {
      color: #f4e7e7; /* Set the color of the placeholder text */
      font-style: italic; /* Set the font style of the placeholder text */

    }
    #submitBtn:disabled {
      cursor: not-allowed;
      opacity: .3;
    }
  </style>

</head>

<body style="background-color: rgb(127, 127, 127);">
  <div class="all-content">

    <!-- navbar end -->


    <!-- home section -->
    <div class="home">
      <div class="content" data-aos="zoom-out-right">
        <h3 class="headline">
          ZESUGAR PISTORS
        </h3>

        <div class="form">
          <h1>sign up</h1>
          <form action="/signup" method="post" onsubmit="return validateForm()">
            <div>
              <input type="text" name="name" id="name" oninput="validateName()" placeholder="Name">
              <span id="name-error" class="error-message"></span>
            </div>
            <div>
              <input type="email" name="email" id="email" oninput="validateEmail()" placeholder="Email">
              <span id="email-error" class="error-message"></span>
            </div>
            <div>
              <input type="password" name="password" id="password" oninput="validatePassword()" placeholder="Password">
              <span id="password-error" class="error-message"></span>
            </div>
            <div>
              <input type="password" name="cpassword" id="cpassword" oninput="validateConfirmPassword()" placeholder="Confirm Password">
              <span id="cpassword-error" class="error-message"></span>
            </div>
            <button class="sub" type="submit" id="submitBtn" disabled>Sign Up</button>
          </form>
          <a href="/login">Login</a>
          <div class="error" style="color: red;"> 
            <%= errmsg %>
            </div>
        </div>

      </div>
      <div class="img" data-aos="zoom-out-left">
        <img src="./image/background.png" alt="">
      </div>
    </div>
    <!-- home section end -->

  </div>



  <!-- =======validation========== -->
  <script>
    function validateName() {
      const nameInput = document.getElementById('name');
      const nameError = document.getElementById('name-error');
      const nameRegex = /^[a-zA-Z]{4,}$/;

      if (!nameRegex.test(nameInput.value)) {
        nameError.textContent = 'Name must be at least 4 letters, no numbers allowed.';
      } else {
        nameError.textContent = '';
      }

      validateSubmitButton();
    }

    function validateEmail() {
      const emailInput = document.getElementById('email');
      const emailError = document.getElementById('email-error');
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

      if (!emailRegex.test(emailInput.value)) {
        emailError.textContent = 'Invalid email format.';
      } else {
        emailError.textContent = '';
      }

      validateSubmitButton();
    }

    function validatePassword() {
      const passwordInput = document.getElementById('password');
      const passwordError = document.getElementById('password-error');
      const passwordRegex = /^(?=.*[a-zA-Z])(?=.*\d).{6,}$/;

      if (!passwordRegex.test(passwordInput.value)) {
        passwordError.textContent = 'Password must be at least 6 characters with at least one letter and one number.';
      } else {
        passwordError.textContent = '';
      }

      validateSubmitButton();
    }

    function validateConfirmPassword() {
      const passwordInput = document.getElementById('password');
      const cpasswordInput = document.getElementById('cpassword');
      const cpasswordError = document.getElementById('cpassword-error');

      if (passwordInput.value !== cpasswordInput.value) {
        cpasswordError.textContent = 'Passwords do not match.';
      } else {
        cpasswordError.textContent = '';
      }

      validateSubmitButton();
    }

    function validateSubmitButton() {
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const cpasswordInput = document.getElementById('cpassword');
    let passwordOk = false;
    if(cpasswordInput.value === passwordInput.value  ){
      passwordOk = true;
    }

    const submitBtn = document.getElementById('submitBtn');
    submitBtn.disabled = !nameInput.value || !emailInput.value || !passwordInput.value || !cpasswordInput.value || !passwordOk;
    
  }


    function validateForm() {
      validateName();
      validateEmail();
      validatePassword();
      validateConfirmPassword();

      // Only allow form submission if all errors are empty
      return document.querySelectorAll('.error-message').every(error => error.textContent === '');
    }
  </script>


  <!-- =========================== -->


  <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
  <script>
    AOS.init();
  </script>
  <script>
    if (window.history.replaceState) {
      window.history.replaceState(null, null, window.location.href);
    }
  </script>
</body>

</html>