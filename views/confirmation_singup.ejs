<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZESUGAR PISTORS</title>
    <link rel="shortcut icon" type="image" href="./image/logo.png">
    <link rel="stylesheet" href="/style.css">
    <!-- bootstrap links -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <!-- bootstrap links -->

    <!-- animation links -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <!-- animation links -->
    <style>
      *{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Uchen', serif;
}
.all-content{
    background: rgb(72, 20, 44);
}
/* navbar */


/* home section */
.home{
    width: 100%;
    height: 100vh;
    display: flex;
    background-image: linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5)), url(./image/background2.png);
    background-size: fill;
    align-items: center;
    justify-content: center;
    flex-wrap: wrap;
    position: relative;
    z-index: 0;
}
.home .img{
  flex: 400px;
}
.home .img img{
    width: 100%;
    
}
.home .content{
    flex: 400px;
    
    margin-left: 60px;
}
.form{
    color: rgb(178, 204, 227);
    align-items: center;
    text-align: center;
    border-radius: 12px;
    padding: 30px ;
    border: 2px solid rgb(87, 44, 40);
    width: 40%;
    backdrop-filter: blur(5px);
    margin-left: 160px;

    
}
input{
    border-radius: 12px;
    background-color: transparent;
    color: rgb(255, 255, 255);
  
}
.sub{
    margin-top: 20px;
    width: 20%;
    border-radius: 15px;
    background-color: transparent;
    backdrop-filter: blur(5px);
    color: white;
}
.headline{
    color: white;
    font-size: 50px;
    margin-bottom: 2rem;
    text-shadow: 5px 2px 5px rgb(31, 12, 10);
}

    </style>

</head>

<body style="background-color: rgb(127, 127, 127);">
    <div class="all-content">

        <!-- navbar end -->


        <!-- home section -->
        <div class="home">
            <div class="content" data-aos="zoom-out-right">
                <h3 class="headline">
                    ZESUGAR PISTORS
                </h3>


                <div class="form">
                    <h4><strong>OTP</strong></h4>
                    <form action="/forgotpassword" method="post">
                        <div>
                            <label for="email">Email</label>
                            <input id="email-input" type="email" placeholder="Email" name="email" value="<%=email%>">

                        </div>
                        <button id="send-button" class="send-button sub" type="submit" type="submit">Send</button><div style="color:white;" data-time=<%=time%> id="timer"><%=time ?time:""%></div>
                    </form>
                    <input id="otp-input"  type="text" placeholder="Enter OTP">
                    <button  class="confirm-button sub" id="confirm-button">Confirm</button>

                    <div style="color: rgba(246, 0, 0, 0.759);">
                        <%=errmsg%>
                    </div>
                    
                </div>
                 <div id="popup" style="display: none; color: greenyellow;"><%=msg%></div>
            </div>

        </div>
        <!-- home section end -->

    </div>


   



    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <script>
        AOS.init();
    </script>
    <script>
        if (window.history.replaceState) {
            window.history.replaceState(null, null, window.location.href);
        }
    </script>
    <script>

        window.onload = function() {
        var popup = document.getElementById('popup');
        popup.style.display = 'block';

        setTimeout(function() {
            popup.style.display = 'none';
        }, 3000);
        };

    </script>
<script>
    window.onload = function() {
    let timer =document.getElementById('timer') 
    let time =timer.getAttribute("data-time")
      var popup = document.getElementById('popup');
      popup.style.display = 'block';
  
      setTimeout(function() {
        popup.style.display = 'none';
      }, 3000);
  
      var sendButton = document.getElementById('send-button');
      sendButton.disabled = true;
      sendButton.style.backgroundColor = 'red';
  
      var count = time;
      var interval = setInterval(function() {
        document.getElementById('timer').innerHTML = count;
        count--;
        if (count === -1) {
          clearInterval(interval);
          document.getElementById('timer').innerHTML = '';
          console.log("time over");
  
          sendButton.disabled = false;
          sendButton.style.backgroundColor = ''; // or set it to the original color
        }
      }, 1000);
    };
  </script>




<script>
    document.addEventListener("DOMContentLoaded", function() {
      const confirm_button = document.getElementById("confirm-button");
      confirm_button.addEventListener("click", () => {
        console.log("confoirm button clicked");
         var email = document.getElementById('email-input').value;
         var otp = document.getElementById('otp-input').value;
         if (!email || !otp) {
        alert('Email or OTP cannot be empty');
        return;
         }
  
          (async () => {
              try {
                window.location.href=`/singupconfirmation?email=${encodeURIComponent(email)}&otp=${encodeURIComponent(otp)}`
              } catch (err) {
                  alert("Error in the request: " + err.message);
              }
          })();
      });
    });
    
       </script>


</body>

</html>